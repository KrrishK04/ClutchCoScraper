!function(){"use strict";class t{dynamicInputElementId;dynamicBottomSheetId;listItems;preselectListItems;selectedStateValue={};selectedStateText={};onSelectCallback;showToolTip;tooltipContent;inputElementIdV2;onCloseCallback;buttonText;buttonType;secondaryButtonText;sheetContent;handleContentAtSource;btnClickCallback;syncInputValue;bottomSheetElement;bottomSheetActivatorElement;bottomSheetSliderElement;bottomSheetOverlayElement;bottomSheetContentElement;bottomSheetDragIconElement;isDragging=!1;startY;startHeight;defaultHeight;sheetHeightMap={tooltip:40,input:70,"date-picker":72};constructor(t){t.common&&Object.keys(t.common).forEach((e=>{this[e]=t.common[e]})),this.dynamicInputElementId=t.dynamicInputElementId,this.dynamicBottomSheetId=t.dynamicBottomSheetId,this.listItems=t.listItems,this.preselectListItems=t.preselectListItems,this.onSelectCallback=t.onSelectCallback,this.syncInputValue=t.syncInputValue,this.buttonText=t.buttonText||"Done",this.secondaryButtonText=t.secondaryButtonText,this.buttonType=t.buttonType||"primary",this.targetType=t.targetType||"input",this.btnClickCallback=t.btnClickCallback,this.onCloseCallback=t.onCloseCallback,this.sheetContent=t.sheetContent,this.handleContentAtSource=t.handleContentAtSource,this.defaultHeight=t.defaultHeight,this.sheetHeightByType=t.defaultHeight||this.sheetHeightMap[t.targetType],this.init()}init(){this.defineElements()}defineElements(){this.bottomSheetElement=document.getElementById(this.dynamicBottomSheetId),this.bottomSheetActivatorElement=this.bottomSheetElement.querySelector(`#${this.dynamicInputElementId}-${this.targetType}`),this.bottomSheetSliderElement=this.bottomSheetElement.querySelector(".sg-bottom-sheet__wrapper"),this.bottomSheetOverlayElement=this.bottomSheetSliderElement.querySelector(".sg-bottom-sheet__wrapper-overlay"),this.bottomSheetContentElement=this.bottomSheetSliderElement.querySelector(".content"),this.bottomSheetDragIconElement=this.bottomSheetSliderElement.querySelector(".drag-icon"),this.showToolTip&&this.tooltipContent&&this.initTooltip(),this.constructSelections(),this.addListeners()}initTooltip(){const t=document.querySelector(`#${this.inputElementIdV2} .sg-tooltip-v2`),i={tooltipContent:t.getAttribute("data-tooltip-content"),tooltipProps:t.getAttribute("data-tooltip-props"),tooltipPosition:t.getAttribute("data-tooltip-position")};new e(t,i)}onItemSelectionEventhandler(t,e,i,s){const n="sg-token-v2--selected";let o=null;this.selectedStateValue[e.title]&&(o=document.getElementById(`${this.dynamicBottomSheetId}_${this.selectedStateValue[e.title]}`),o.classList.remove(n)),this.selectedStateValue[e.title]=i.value,this.selectedStateText[e.title]=i.title,"button"!==i.type&&(t?o.classList.add(n):s.target.classList.contains(n)?s.target.classList.remove(n):s.target.classList.add(n)),this.updateInputState(),this.onSelectCallback(this.selectedStateValue)}updateInputState(){this.bottomSheetActivatorElement.value="";let t="";Object.keys(this.selectedStateText).length&&(t+=Object.values(this.selectedStateText).join("; "),this.bottomSheetActivatorElement.value=t,this.syncInputValue&&this.syncInputValue(t))}initPreselectListItems(){this.preselectListItems&&this.preselectListItems.length&&this.preselectListItems.forEach((t=>{t.list.forEach((e=>{this.selectedStateValue[t.title]=e.value,this.selectedStateText[t.title]=e.title,this.onItemSelectionEventhandler(!0,t,e)}))}))}constructSelections(){const t=this.bottomSheetSliderElement.querySelector(".body");if(this.sheetContent&&!this.handleContentAtSource)t.innerHTML="",t.innerHTML=`<div class="text-content">${this.sheetContent}</div>`;else if(this.listItems&&this.listItems.length&&!this.handleContentAtSource){t.innerHTML="";const e=document.createElement("div");this.listItems.forEach((t=>{const i=document.createElement("div");i.classList.add("section");const s=document.createElement("div");s.classList.add("section-title"),s.textContent=t.title,i.appendChild(s),t.list.forEach((e=>{const s=document.createElement("div");s.setAttribute("id",`${this.dynamicBottomSheetId}_${e.value}`),"button"===e.type?(s.classList.add("section-action"),s.innerHTML=`<button type="button"\n                id="${this.dynamicBottomSheetId}_${e.value}"\n                class="sg-button-v2 sg-button-v2--primary sg-button-v2--medium sg-button-v2--primary-text"\n              >\n                <span\n                  class="sg-button-v2--with-icon sg-button-v2--with-icon__prepend sg-icon-v2 sg-icon-v2__plus"\n                  style="--sgIconColor: #e62415;"></span>\n                <span>${e.btnLabel}</span>\n              </button>`):(s.textContent=e.title,s.classList.add("sg-token-v2")),s.onclick=this.onItemSelectionEventhandler.bind(this,!1,t,e),i.appendChild(s)})),e.append(i)})),t.append(e),this.initPreselectListItems()}const e=t.querySelector(".section-submit-cta");if(e)return void(e.parentElement.onclick=this.actionCtaClick.bind(this,"primary"));const i=document.createElement("div"),s=document.createElement("button");if(s.classList.add("section-submit-cta","sg-button-v2",`sg-button-v2--${this.buttonType}`,"sg-button-v2--medium"),s.innerHTML=`<span>${this.buttonText}</span>`,s.onclick=this.actionCtaClick.bind(this,"primary"),i.append(s),this.secondaryButtonText){const t=document.createElement("button");t.classList.add("cta-secondary","sg-button-v2","sg-button-v2--primary","sg-button-v2--medium","sg-button-v2--primary-text"),t.innerHTML=`<span>${this.secondaryButtonText}</span>`,t.onclick=this.actionCtaClick.bind(this,"secondary"),i.append(t)}t.append(i)}actionCtaClick(t){this.btnClickCallback&&this.btnClickCallback(t),this.hideBottomSheet()}showBottomSheet(){this.bottomSheetSliderElement.classList.add("show"),this.updateSheetHeight(this.sheetHeightByType)}updateSheetHeight(t){this.bottomSheetContentElement.style.height=`${t}vh`,this.bottomSheetSliderElement.classList.toggle("fullscreen",100===t)}hideBottomSheet(){this.bottomSheetSliderElement.classList.remove("show"),this.onCloseCallback&&this.onCloseCallback()}dragStart(t){this.isDragging=!0,this.startY=t.pageY||t.touches?.[0].pageY,this.startHeight=parseInt(this.bottomSheetContentElement.style.height),this.bottomSheetSliderElement.classList.add("dragging")}dragging(t){if(!this.isDragging)return;const e=this.startY-(t.pageY||t.touches?.[0].pageY),i=this.startHeight+e/window.innerHeight*100;this.updateSheetHeight(i)}dragStop(){this.isDragging=!1,this.bottomSheetSliderElement.classList.remove("dragging");const t=parseInt(this.bottomSheetContentElement.style.height);t<25?this.hideBottomSheet():t>(this.defaultHeight||75)?this.updateSheetHeight(100):this.updateSheetHeight(this.sheetHeightByType)}addListeners(){this.bottomSheetDragIconElement.addEventListener("mousedown",this.dragStart.bind(this)),this.bottomSheetElement.addEventListener("mousemove",this.dragging.bind(this)),this.bottomSheetElement.addEventListener("mouseup",this.dragStop.bind(this)),this.bottomSheetDragIconElement.addEventListener("touchstart",this.dragStart.bind(this)),this.bottomSheetElement.addEventListener("touchmove",this.dragging.bind(this)),this.bottomSheetElement.addEventListener("touchend",this.dragStop.bind(this)),this.bottomSheetOverlayElement.addEventListener("click",this.hideBottomSheet.bind(this)),this.bottomSheetActivatorElement.addEventListener("click",this.showBottomSheet.bind(this))}}class e{tooltipContainer;settings={tooltipContent:"",tooltipProps:"",tooltipPosition:"",preventMouseEventListeners:!1};constructor(t,e){this.tooltipContainer=t,this.settings={...e},this.isMobileMode=window.innerWidth<=768,this.init()}init(){this.addListeners()}addListeners(){this.isMobileMode&&this.settings.mobileBottomSheet?new t({dynamicInputElementId:this.settings.dynamicTooltipTarget||this.settings.dynamicTooltipId,dynamicBottomSheetId:this.settings.dynamicBottomSheetId,targetType:"tooltip",buttonText:this.settings.richTooltipBtnTxt||"Close",buttonType:"secondary",sheetContent:this.settings.tooltipContent,btnClickCallback:this.settings.btnClickCallback}):this.settings.preventMouseEventListeners?this.addCustomTooltipEvent():(this.addMouseEnterListener(),this.addMouseLeaveListener())}show(){this.createAndPasteTooltipTemplate()}hide(){this.addActionBtnClickHandler("remove"),this.tooltipContainer.querySelector(".sg-tooltip__wrap")?.remove()}addActionBtnClickHandler(t){if(!this.settings.richTooltipBtnTxt||!this.settings.dynamicTooltipId)return;const e=document.querySelector(`#${this.settings.dynamicTooltipId}-tooltip .rich-tooltip-actions__btn`);e?.[`${t}EventListener`]("click",this.settings.btnClickCallback.bind(this))}addCustomTooltipEvent(){this.tooltipContainer.addEventListener("showSgTooltip",(()=>this.show())),this.tooltipContainer.addEventListener("hideSgTooltip",(()=>this.hide()))}addMouseEnterListener(){this.tooltipContainer.addEventListener("mouseenter",(()=>this.show()))}addMouseLeaveListener(){this.tooltipContainer.addEventListener("mouseleave",(()=>this.hide()))}createAndPasteTooltipTemplate(){let t="";this.settings.richTooltipBtnTxt&&(t=`\n        <div class="rich-tooltip-actions">\n          <button type="button" class="rich-tooltip-actions__btn">\n            <span>${this.settings.richTooltipBtnTxt}</span>\n          </button>\n        </div>\n      `);const e=`\n            <div class='sg-tooltip__wrap ${this.settings.tooltipProps}'>\n                <div class="sg-tooltip__container">\n                  ${this.settings.tooltipContent}\n                  ${t}\n                </div>\n                <span class="sg-tooltip__arrow"></span>\n            </div>\n        `;if(this.settings.tooltipPosition){const t=this.tooltipContainer.querySelector(this.settings.tooltipPosition);t.insertAdjacentHTML("beforeend",e),t.classList.add("sg-tooltip__position")}else this.tooltipContainer.insertAdjacentHTML("beforeend",e);this.addActionBtnClickHandler("add")}}var i;i=()=>{!function(t){const i="string"==typeof t?document.querySelector(t):t;i&&Array.from(i.querySelectorAll(".sg-tooltip, .sg-tooltip-v2")).forEach((t=>{const i={tooltipContent:t.dataset.tooltipContent||"",tooltipProps:t.dataset.tooltipProps||"",tooltipPosition:t.dataset.tooltipPosition||""};new e(t,i)}))}("body")},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();